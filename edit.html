<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="JS/admin-dataset.js" defer></script>
    <link rel="stylesheet" href="CSS/edit.css">
</head>
<body>
    <nav class="navbar">
        <div class="brand-title">
           <img src="images/SampleLogo.png">
            <a href="Index.html">Project ANI</a>
           </div>
        <a href="#" class="toggle-button">
           <span class="bar"></span>
           <span class="bar"></span>
           <span class="bar"></span>
        </a>
        <div class="navbar-links">
           <ul>
               <li><a href="edit.html" class="MMlist">Edit</a></li>
               <li><a href="admin-dataset.html" class="MMlist">Dataset</a></li>
               <li><a href="#" class="MMlist">Forum</a></li>
           </ul>
        </div>
       </nav>

    <div class="Banner" id="HomeID">
        <div class="Banner1">
            <h2>Project ANI</h2>    
            <p>Agri Natin Ito : A Decision Support System for Benguet's Crop Prediction</p>
        </div>
    </div>


    <!--CREATE-->
    <div class="filler-edit">
        <h1>Edit</h1>
    </div>
    <div class="edit">
        <div class="edit-crops">
            <form>
                <h1>Crops (Update)</h1>
                <label for="Crops">Choose Order:</label><br>
                <select id="Crops" name="cropOrder">
                    <option value="1st">1st</option>
                    <option value="2nd">2nd</option>
                    <option value="3rd">3rd</option>
                    <option value="4th">4th</option>
                    <option value="5th">5th</option>
                    <option value="6th">6th</option>
                    <option value="7th">7th</option>
                    <option value="8th">8th</option>
                    <option value="9th">9th</option>
                    <option value="10th">10th</option>
                </select>
                <input type="input" id="cropName" placeholder="Enter Crop Name"/>
                <input type="input" id="cropBenefit" placeholder="Enter Crop Benefit"/>
                <input type="input" id="cropInformation" placeholder="Enter Crop Information"/>
                <input type="input" id="cropTips" placeholder="Enter Crop Tips"/>
                <!--Image Upload-->
                    <p>Crop Description image (PNG or JPEG only)</p>
                    <input id="crop-desc-pic" type="file" name="crop-desc-img">
                    <p>Crop Information image (PNG or JPEG only)</p>
                    <input id="crop-info-pic" type="file" name="crop-info-img">
                    <input type="submit">
                
                <button type="button" onclick="createCrop(); cropnewChanges();">Update</button>
                <p id = "cropChanges">No Changes</p>


            </form>
        </div>
        <div class="edit-season">
            <form>
                <h1> Season (Update)</h1>
                <label for="Season">Choose Order:</label><br>
                <select id="Season" name="seasonOrder">
                    <option value="1st">1st</option>
                    <option value="2nd">2nd</option>
                    <option value="3rd">3rd</option>
                    <option value="4th">4th</option>
                    <option value="5th">5th</option>
                    <option value="6th">6th</option>
                    <option value="7th">7th</option>
                    <option value="8th">8th</option>
                    <option value="9th">9th</option>
                    <option value="10th">10th</option>
                    <option value="11th">11th</option>
                    <option value="12th">12th</option>
                </select>
                <input type="input" id="seasonName" placeholder="Enter Season Name"/>
                <input type="input" id="seasonDescription" placeholder="Enter Season Description"/>
                <input type="input" id="seasonInformation" placeholder="Enter Season information"/>
                <!--Image Upload-->
                    <p>Crop Description image (PNG or JPEG only)</p>
                    <input  id="season-desc-pic" type="file" name="season-desc-img">
                    <p>Crop Information image (PNG or JPEG only)</p>
                    <input id="season-info-pic" type="file"  name="season-info-img">
                    <input type="submit">
                
                <button type="button" onclick="createSeason(); seasonnewChanges();">Update</button>
                <p id = "seasonChanges">No Changes</p>
            </form>
        </div>
        <div class="edit-municipality">
            <form>
                <h1>Municipality (Update)</h1>
                <label for="Muncipality">Choose Order:</label><br>
                <select id="Muncipality" name="municipalityOrder">
                    <option value="1st">1st</option>
                    <option value="2nd">2nd</option>
                    <option value="3rd">3rd</option>
                    <option value="4th">4th</option>
                    <option value="5th">5th</option>
                    <option value="6th">6th</option>
                    <option value="7th">7th</option>
                    <option value="8th">8th</option>
                    <option value="9th">9th</option>
                    <option value="10th">10th</option>
                    <option value="11th">11th</option>
                    <option value="12th">12th</option>
                </select>
                <input type="input" id="municipalityName" placeholder="Enter Muncipality Name"/>
                <input type="input" id="municipalityDescription" placeholder="Enter Muncipality Description"/>
                <input type="input" id="municipalityInformation" placeholder="Enter Muncipality Information"/>
                <!--Image Upload-->
                    <p>Crop Description image (PNG or JPEG only)</p>
                    <input id="municipality-desc-pic"  type="file" name="municipality-desc-img">
                    <p>Crop Information image (PNG or JPEG only)</p>
                    <input id="municipality-info-pic" type="file"  name="municipality-info-img">
                    <input type="submit">
                
                <button type="button" onclick="createMunicipality(); municipalitynewChanges();">Update</button>
                <p id = "municipalityChanges">No Changes</p>
            </form>
        </div>
    </div>
    <!--DELETE-->
    <div class="filler-edit">
        <h1>Delete</h1>
    </div>
    <div class="delete">
            <div class="delete-crops">
                <form>
                    <h1>Crops (Delete)</h1>
                    <label for="delete_Crops">Choose Order:</label><br>
                    <select id="delete_Crops" name="cropOrder">
                        <option value="1st">1st</option>
                        <option value="2nd">2nd</option>
                        <option value="3rd">3rd</option>
                        <option value="4th">4th</option>
                        <option value="5th">5th</option>
                        <option value="6th">6th</option>
                        <option value="7th">7th</option>
                        <option value="8th">8th</option>
                        <option value="9th">9th</option>
                        <option value="10th">10th</option>
                    </select>
                    <button type="button" onclick="deleteCrop(); cropdeleteChanges();">Delete</button>
                    <p id = "cropremoveChanges">No Changes</p>
                </form>
            </div>

            <div class="delete-season">
                <form>
                    <h1> Season (Delete)</h1>
                    <label for="delete_Season">Choose Order:</label><br>
                    <select id="delete_Season" name="seasonOrder">
                        <option value="1st">1st</option>
                        <option value="2nd">2nd</option>
                        <option value="3rd">3rd</option>
                        <option value="4th">4th</option>
                        <option value="5th">5th</option>
                        <option value="6th">6th</option>
                        <option value="7th">7th</option>
                        <option value="8th">8th</option>
                        <option value="9th">9th</option>
                        <option value="10th">10th</option>
                        <option value="11th">11th</option>
                        <option value="12th">12th</option>
                    </select>
                    <button type="button" onclick="deleteSeason(); seasondeleteChanges();">Delete</button>
                    <p id = "seasonremoveChanges">No Changes</p>
                </form>
            </div>
            
            <div class="delete-municipality">
                <form>
                    <h1>Municipality (Delete)</h1>
                    <label for="delete_Muncipality">Choose Order:</label><br>
                    <select id="delete_Muncipality" name="municipalityOrder">
                        <option value="1st">1st</option>
                        <option value="2nd">2nd</option>
                        <option value="3rd">3rd</option>
                        <option value="4th">4th</option>
                        <option value="5th">5th</option>
                        <option value="6th">6th</option>
                        <option value="7th">7th</option>
                        <option value="8th">8th</option>
                        <option value="9th">9th</option>
                        <option value="10th">10th</option>
                        <option value="11th">11th</option>
                        <option value="12th">12th</option>
                    </select>
                    <button type="button" onclick="deleteMunicipality(); municipalitydeleteChanges();">Delete</button>
                    <p id = "municipalityremoveChanges">No Changes</p>
                </form>
            </div>
    </div>

    <div class="footer">
        <p>© Project ANI 2021</p>
        <p>Developed by the CITCS team</p>
    </div> 
    
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-analytics.js"></script>
    <script>

        const firebaseConfig = {
            apiKey: "AIzaSyA0Z7v4Ra16VFCFV1P-tKXKoO85qIl5VaM",
            authDomain: "project-ani-e4c86.firebaseapp.com",
            projectId: "project-ani-e4c86",
            storageBucket: "project-ani-e4c86.appspot.com",
            messagingSenderId: "1027527105712",
            appId: "1:1027527105712:web:c65eb6a5d15de1c5d4ef75",
            measurementId: "G-8CBN1FNC7F"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const firestore = firebase.firestore();
        const storage = firebase.storage();
        
        function cropnewChanges(){
            let x = document.getElementById("cropChanges")
            x.innerHTML = "New Changes were Saved"
        }

        function seasonnewChanges(){
            let x = document.getElementById("seasonChanges")
            x.innerHTML = "New Changes were Saved"
        }

        function municipalitynewChanges(){
            let x = document.getElementById("municipalityChanges")
            x.innerHTML = "New Changes were Saved"
        }


        function cropdeleteChanges(){
            let x = document.getElementById("cropremoveChanges")
            x.innerHTML = "New Changes were Saved"
        }

        function seasondeleteChanges(){
            let x = document.getElementById("seasonremoveChanges")
            x.innerHTML = "New Changes were Saved"
        }

        function municipalitydeleteChanges(){
            let x = document.getElementById("municipalityremoveChanges")
            x.innerHTML = "New Changes were Saved"
        }
        
        function createCrop(){
            console.log('Creating Record from firestore')
            var CropID = document.getElementById('Crops').value
            var cropName = document.getElementById('cropName').value
            var cropBenefit = document.getElementById('cropBenefit').value
            var cropInformation = document.getElementById('cropInformation').value
            var cropTips = document.getElementById('cropTips').value
            var cropDescImg = document.getElementById('crop-desc-pic').files[0]
            var cropInfoImg = document.getElementById('crop-info-pic').files[0]
            
            storage.ref('CropDescImages/'+cropDescImg.name).put(cropDescImg).then(()=> {
                storage.ref('CropDescImages/'+cropDescImg.name).getDownloadURL().then((url1) => {
                    storage.ref('CropInfoImages/'+cropInfoImg.name).put(cropInfoImg).then(()=> {
                        storage.ref('CropInfoImages/'+cropInfoImg.name).getDownloadURL().then((url2) => {
                            firestore.collection('crops').add({
                                id: CropID,
                                name: cropName,
                                benefit: cropBenefit,
                                information: cropInformation,
                                tips: cropTips,
                                descIMG: url1,
                                infoIMG: url2,
                                timestamp: new Date()

                            })
                            .then((docRef) => {
                                console.log("Record Successful Created " + docRef.id)
                                alert(CropID + " Crop Successfuly Created");
                            })
                            .catch((error)=> {
                                console.log(error)
                            })
                        })
                    })
                })
            });

        }

        function createSeason(){
            console.log('Creating Record from firestore')
            var SeasonID = document.getElementById('Season').value
            var seasonName = document.getElementById('seasonName').value
            var seasonDescription = document.getElementById('seasonDescription').value
            var seasonInformation = document.getElementById('seasonInformation').value
            var seasonDescIMG = document.getElementById('season-desc-pic').files[0]
            var seasonInfoIMG = document.getElementById('season-info-pic').files[0]

            storage.ref('SeasonDescImages/'+seasonDescIMG.name).put(seasonDescIMG).then(()=> {
                storage.ref('SeasonDescImages/'+seasonDescIMG.name).getDownloadURL().then((url1) => {
                    storage.ref('SeasonInfoImages/'+seasonInfoIMG.name).put(seasonInfoIMG).then(()=> {
                        storage.ref('SeasonInfoImages/'+seasonInfoIMG.name).getDownloadURL().then((url2) => {
                            firestore.collection('seasons').add({
                                id: SeasonID,
                                name: seasonName,
                                description: seasonDescription,
                                information: seasonInformation,
                                descIMG: url1,
                                infoIMG: url2,
                                timestamp: new Date()

                            })
                            .then((docRef) => {
                                console.log('Record Successfuly Created ' + docRef.id)
                                alert(SeasonID + " Season successfuly createed")
                            })
                            .catch((error)=> {
                                console.log(error)
                            })
                        })
                    })
                })
            });
        }

        function createMunicipality(){
            console.log('Creating Record from firestore')
            var MunID = document.getElementById('Muncipality').value
            var municipalityName = document.getElementById('municipalityName').value
            var municipalityDescription = document.getElementById('municipalityDescription').value
            var municipalityInformation = document.getElementById('municipalityInformation').value
            var municipalityDescIMG = document.getElementById('municipality-desc-pic').files[0]
            var municipalityInfoIMG = document.getElementById('municipality-info-pic').files[0]


            storage.ref('MunicipalityDescImages/'+municipalityDescIMG.name).put(municipalityDescIMG).then(()=> {
                storage.ref('MunicipalityDescImages/'+municipalityDescIMG.name).getDownloadURL().then((url1) => {
                    storage.ref('MunicipalityInfoImages/'+municipalityInfoIMG.name).put(municipalityInfoIMG).then(()=> {
                        storage.ref('MunicipalityInfoImages/'+municipalityInfoIMG.name).getDownloadURL().then((url2) => {
                            firestore.collection('municipalities').add({
                                id: MunID,
                                name: municipalityName,
                                description: municipalityDescription,
                                information: municipalityInformation,
                                descIMG: url1,
                                infoIMG: url2,
                                timestamp: new Date()
                            })
                            .then((docRef) => {
                                console.log('Record Successfuly Created ' + docRef.id)
                                alert(MunID + " Municipality successfuly createed")
                            })
                            .catch((error)=> {
                                console.log(error)
                            })
                        })
                    })
                })
            });
        }

        function deleteCrop() {
            var id = document.getElementById('delete_Crops').value;
            firestore.collection('crops').where('id', '==', id).get()
            .then((querySnapshot) => {
                docID = querySnapshot.docs[0].id;
                firestore.collection('crops').doc(docID).delete().then(()=>{
                    alert(id + "Crop deleted successfuly")
                    console.log(id + ' deleted');
                });

            });
        }

        function deleteSeason() {
            var id = document.getElementById('delete_Season').value;
            firestore.collection('seasons').where('id', '==', id).get()
            .then((querySnapshot) => {
                docID = querySnapshot.docs[0].id;
                firestore.collection('seasons').doc(docID).delete().then(()=>{
                    alert(id + "Season deleted successfuly")
                    console.log(id + ' deleted');
                });

            });
        }

        function deleteMunicipality() {
            var id = document.getElementById('delete_Muncipality').value;
            firestore.collection('municipalities').where('id', '==', id).get()
            .then((querySnapshot) => {
                docID = querySnapshot.docs[0].id;
                firestore.collection('municipalities').doc(docID).delete().then(()=>{
                    alert(id + "Municipality deleted successfuly")
                    console.log(id + ' deleted');
                });
            });
        }

    </script>
</body>
</html>